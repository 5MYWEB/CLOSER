<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.ssafy.closer.model.mapper.FeedMapper">

    <!-- DB엔 update_at 컬럼있는데 피드는 수정 기능없어서 뺐습니다. 추후 feed DB에서 update_at 컬럼 삭제해야 함-->
<!--    <insert id="feedWrite" parameterType="feedDto">-->
<!--        insert into feed (feed_pk, userId, content, create_at, location)-->
<!--        values (#{feed_pk}, #{userId}, #{content}, #{create_at}, #{location})-->
<!--    </insert>-->

    <!-- CLOSER 전체 유저의 피드 목록 -->
<!--    <select id="feedListAll" resultType="BoardDto">-->
<!--        select B.board_pk, B.userId, B.content, B.created_at, B.location-->
<!--        from board B join board_category BC on B.kind_pk = BC.kind_pk-->
<!--        where BC.kind_pk = 7-->
<!--        order by B.created_at desc;-->
<!--    </select>-->

<!--    &lt;!&ndash; 나와 동일한 위치인 사람들의 피드 목록 &ndash;&gt;-->
<!--    <select id="feedListNear" parameterType="String" resultType="BoardDto">-->
<!--        select B.board_pk, B.userId, B.content, B.created_at, B.location-->
<!--        from board B join board_category BC on B.kind_pk = BC.kind_pk-->
<!--        where BC.kind_pk = 7 and B.location = #{location}-->
<!--        order by B.created_at desc;-->
<!--    </select>-->

<!--    &lt;!&ndash; 내가 팔로우 한 사람들의 피드 목록 &ndash;&gt;-->
<!--    <select id="feedListFollow" parameterType="String" resultType="BoardDto">-->
<!--        select B.board_pk, B.userId, B.content, B.created_at, B.location-->
<!--        from user_follow U left join board B on (U.passiveUser = B.userId)-->
<!--        where U.activeUser=#{passiveUser}-->
<!--        order by B.created_at desc;-->
<!--    </select>-->


<!--    &lt;!&ndash; 피드 생성 &ndash;&gt;-->
<!--    <insert id="createFeed" parameterType="FeedDto">-->
<!--        insert into feed(userId, content, location, created_at)-->
<!--        values (#{userId}, #{content}, #{location}, #{created_at})-->
<!--    </insert>-->

<!--    &lt;!&ndash; 피드 조회 &ndash;&gt;-->
<!--    <select id="readFeed" parameterType="int" resultType="FeedDto">-->
<!--        select * from feed-->
<!--        where feed_pk = #{feed_pk}-->
<!--    </select>-->

<!--    &lt;!&ndash; 피드 수정 &ndash;&gt;-->
<!--    <update id="feedUpdate" parameterType="FeedDto">-->
<!--        update feed-->
<!--        set content=#{content}-->
<!--        where feed_pk = #{feed_pk}-->
<!--    </update>-->

<!--    &lt;!&ndash; 피드 삭제 &ndash;&gt;-->
<!--    <delete id="deleteFeed" parameterType="int">-->
<!--        delete C-->
<!--        from feed F-->
<!--        join comments C-->
<!--        on F.feed_pk = C.board_pk-->
<!--        where (C.board_pk = #{board_pk} and C.kind_pk = #{kind_pk});-->

<!--        delete B-->
<!--        from feed F-->
<!--        join bookmark B-->
<!--        on F.feed_pk = B.board_pk-->
<!--        where (B.board_pk = #{board_pk} and B.kind_pk = #{kind_pk});-->

<!--        delete L-->
<!--        from feed F-->
<!--        join likes L-->
<!--        on F.feed_pk = L.board_pk-->
<!--        where (L.board_pk = #{board_pk} and L.kind_pk = #{kind_pk});-->

<!--        delete F-->
<!--        from feed F-->
<!--        where feed_pk = #{board_pk};-->
<!--    </delete>-->

<!--    &lt;!&ndash; 해당 피드를 쓴 유저 찾기 &ndash;&gt;-->
<!--    <select id="findFeedUser" parameterType="int" resultType="String">-->
<!--        select UserId-->
<!--        from feed-->
<!--        where feed_pk=#{feed_pk}-->
<!--    </select>-->

</mapper>